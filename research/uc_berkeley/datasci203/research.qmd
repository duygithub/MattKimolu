---
title: "Explanatory Linear Model Framework for Optimal Breaststroke Stroke Count in Different Competitive Swimming Scenarios for Swimmers Under 11-Years-Old"
authors: 
  - name: "Duy Bao Vo"
    email: "duyvo@ischool.berkeley.edu"
  - name: "Eric Wang"
    email: "bo_wang@ischool.berkeley.edu"    
date: today
format: 
  pdf:
    number-sections: true
    number-depth: 3
editor: source
bibliography: references.bib
csl: https://www.zotero.org/styles/apa
toc: true
engine: knitr
---


```{r setup, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)  # For plots
library(knitr)
library(readr)    # For loading your CSV file (read_csv)
library(sandwich)
library(stargazer)
library(tidyverse) # For functions like mutate
library(units)
library(dplyr)
library(tidyr)


# For Causal SEM
if (!require("lavaan")) install.packages("lavaan")
if (!require("semPlot")) install.packages("semPlot")
if (!require("tidySEM")) install.packages("tidySEM")

library(lavaan)
library(semPlot)
library(tidySEM)


alpha <- .05

data_plot_custom_shapes <- c("25" = 15, "50L1" = 18, "50L2" = 3, "100IM" = 17)
data_plot_custom_colors <- c("1" = "red", "0" = "blue", "-1" = "green")

source("source/model_summary.R")
```

{{< pagebreak >}}

# Overview

Swimming is an important life skill and can prevent a significant number of childhood deaths[^1]. Swimming is also a great life-long sport[^2] [^3]. Competitive swimming can help with academic achievement[^4] and develop important skills like stress management, interpersonal harmony, and goal management[^5]. This study provides an explanatory framework to help young competitive swimmers improve their breaststroke swim technique and timed trials by deriving a target stroke count. It does not aim to define a universal optimal stroke count, but rather an individualized value appropriate for each swimmer and competitive event.

[^1]: In the US, drowning is the leading cause of death for children ages 1-4 and the second leading cause of unintentional injury death for children ages 5-15.\
    **Source:** Centers for Disease Control and Prevention. (n.d.). *Drowning Facts*. Centers for Disease Control and Prevention, Injury Prevention & Control. Retrieved October 31, 2025, from <https://www.cdc.gov/drowning/data-research/facts/index.html>

[^2]: After accounting for other health factors like age, body mass index, and smoking status, swimmers had 49-53% lower mortality risks compared to the other groups.\
    **Source:** Chase, N. L., Sui, X., & Blair, S. N. (2008). Swimming and all-cause mortality risk compared with running, walking, and sedentary habits in men. *International Journal of Aquatic Research and Education*, *2*(3), 213–223. [https://doi.org/10.25035/ijare.02.03.03](https://www.google.com/search?q=https://doi.org/10.25035/ijare.02.03.03&authuser=1)

[^3]: Swimming provides a combination of buoyancy for a low-impact workout that reduces joint loading and breakdown and water resistance that allows for effective muscle strengthening and cardiovascular conditioning.\
    **Source:** Song, J.-A., & Oh, J. W. (2022). Effects of aquatic exercises for patients with osteoarthritis: Systematic review with meta-analysis. *Healthcare*, *10*(3), Article 560. [https://doi.org/10.3390/healthcare10030560](https://www.google.com/search?q=https://doi.org/10.3390/healthcare10030560&authuser=1)

[^4]: A study of 254 Spanish swimmers showed a correlation between a higher the level of physical activity to higher average grades achieved. This relationship was especially significant among girls (P=.04).\
    **Source:** Ayan, C., Cancela Carral, J., & Montero, C. (2014). Academic performance of young competitive swimmers is associated with physical activity intensity and its predominant metabolic pathway: A pilot study. *Journal of Physical Activity and Health*, *11*(6), 1141–1146. [https://doi.org/10.1123/jpah.2012-0402](https://www.google.com/search?q=https://doi.org/10.1123/jpah.2012-0402&authuser=1)

[^5]: Students in the experimental group of a 15-week swimming intervention program showed significant improvements in emotional stability (P = 0.01) and relaxation (P = 0.02). Positive changes were also observed in social adaptation, including interpersonal harmony (P = 0.03) and perceived social support (P = 0.04). Additionally, academic composure (P = 0.02) and goal management ability (P = 0.04) significantly improved.\
    **Source:** Wang, W., Yu, L., Huang, L., & Gao, X. (2025). Mechanisms of the impact of exercise intervention on college students' mental health: a longitudinal experimental study using swimming as an example. Frontiers in Psychology, 16, 1535214. doi:10.3389/fpsyg.2025.1535214

## Literature Review
@Craig1979 published sports biomechanics research to help improve individual swimming athlete's performance in 1979 and included the formula

$$
Velocity = Stroke Rate \times Stroke Length
$$

The study claims that the greatest decrease to velocity $V$ resulted from a decrease in the stroke rate $S_R$. @Vorontsov1991 published research that male swimmers ages 11-15 should focus more on $S_L$. In a follow-up study, @Vorontsov2002 published findings that maintaining a long $S_L$ is a key factor in improving performance for younger swimmers, especially before they turn 11-12 because that's when the individual swimming rhythm is largely established.

The importance of stroke-related statistics in predicting swimming performance is well-established. @JurimaeBestPredictors claims that the Stroke Index, $S_I = SwimmerSpeed x S_L$, as one of the three best predictors for performance in a 400-meter freestyle swim starting at 11-years-old. Although there is a preponderance of studies for swimmers starting at 11-years-old, there is no peer-reviewed research relating to stroke count of swimmers under 11-years-old despite competitive multi-city competitions available for 5-year-olds with multi-state Age Group Zones (AGZ) Championships starting at 9-year-olds. This lack of emphasis is likely attributable to:

1. The Long-Term Athlete Development (LTAD) developed by Dr. Istvan Balyi is often cited by many sports educators places boys aged 6-9 and girls aged 5-8 at the FUNdamentals stage and boys aged 9-12 and girls aged 8-11 at Learning to Train stage with emphasis on skill and technique development and not competition. [@LangfordLTADInterpreting]
1. The majority of analysis relies on $S_R$ or $S_L$, both requiring special camera equipment and software that is not easily accessible.
1. Younger swimmers are still finding their swimming rhythm.

We believe that we can easily overcome (2) by using the proxy Stroke Count ($S_C$) per lap. We define a stroke as a swimmer's head breaking coming back down after taking a breath. We also believe that individualized models for young swimmers plays an important role in the LTAD framework from (1) because it enables conversations about skill and technique. Finally, we believe that an individualized model can help swimmers develop their swimming rhythm in (3).

## Motivations

Helping young swimmers learn fundamentals and develop good technique is critical for both the development as a long-term athlete, and, more importantly, reduce the risk of injury. In individualized framework for optimizing $S_C$ has several benefits:

* Emphasize the need for good technique, which reduces the risk of injury.
* Help swimmers appreciate the importance of learning technical concepts because $S_C$ operationalizes fundamental concepts of stroke efficiency and streamlined swimming.
* Encourages swimmers to listen to their bodies and think about how they feel when they move.
* Reduce the emphasis on physical advantage and help swimmers focus on their long-term development.

This study aims to create a framework for deriving an individualized optimal $S_C$ that minimizes the time $T_{Lap}$, measured in milliseconds, to complete a lap. We hope that the individualized data will allow coaches to have conversations about how proper technique can lead to an efficient $S_C$ that both minimizes $T_{Lap}$ and reduces the chance of injury.

We hope this framework will be valuable for swimmers as young as 6-years-old who have demonstrated a sufficient mastery of breaststroke (they are not disqualified at sanctioned swim meets when swimming breaststroke) to under 11-years-olds.

This initial study is exclusively on the breaststroke though its methodologies can be applied to other competitive strokes. The metric is selected for the US, though the framework can be extended to international swimming pools. The target audience are individuals working with swimmers under 11-year-old, though the data collection and analysis can be enhanced for older swimmers.

# Experiment Design

## Stroke Count

$S_C$ is proportional to $S_R$ and inversely proportional to $S_L$. Accounting for the glide distance (how far the swimmer is able to dive and swim underwater or kick off the wall and swim underwater),

![Glide Distance and Stroke Count from @Mediterraswim2019](glide_distance_pool_length.png){#fig-glide_distance_pool_length}

the relationship between $S_L$ and $S_C$ is

$$
StrokeLength=\frac{PoolLength-GlideDistance}{StrokeCount}
$$

## Measurement Metric

There are two type of courses in competitive swimming: long course and short course. Olympic competition happens in long course format where each lap is 50 meters (LCM). Internationally, short courses are 25 meters (SCM) (so 1 LCM = 2 x SCM). In the US, most competitive swimming up through college uses 25-yard short courses (SCY) and 50-meter long courses (LCM), (so 1 LCM $\approx$ 2.18722 x SCY). This study uses an SCY pool.

## Selection of Events

Given this study focuses on breaststroke for swimmers under 11-years-old in the US, there are several competitive events that we can study

::: {tbl-colwidths="[40,60]"}
| **Event** | **Note** |
| :--- | :--- |
| 25 Breaststroke SCY | Only for swimmers under 9 years old |
| 50 Breaststroke SCY | |
| 50 Breaststroke LCM | |
| 100 Breaststroke SCY | |
| 100 Breaststroke LCM | |
| 100 Individual Medley SCY | |
| 200 Individual Medley SCY | |
| 200 Individual Medley LCM | |
: US Competitive Events with Breaststroke for Swimmers Under 11 Years Old {#tbl-competitive_event_with_breastroke}
:::

For US non-collegiate swimming, LCM courses are mostly only available during summer sessions, so we only conduct our study in SCY. An Individual Medley (IM) is where the swimmer swims all four strokes and is the second most physically demanding swim allowed for swimmers under 9 years old(e.g., a 100 FR is the only more demanding swim than a 100 IM [@BarbosaEnergetics]). Therefore, it would be too physically demanding for an 8-year-old to continuously swim 200 IM SCY. Finally, we exclude a 100 BR SCY because of time constraints as breaststroke is, by far, the slowest of the competitive strokes. The events that we will conduct the tests are:

* 25 BR SCY
* 50 BR SCY
* 100 IM SCY

## Rest Times

The swimmer will be fatigued after each swim event. For us to conduct our study, we must give the swimmer adequate time to rest between each timed event. @NeivaPassiveRest recommends 10 minutes of passive recovery for a 200 FR SCM and not to exceed 20 minutes. We can use this study as a baseline for rest time because @RatelMetabolicProfile observed that prepubertal children have recovery profiles comparable to well-trained adult endurance athletes (given that our population are competitive prepubertal children, we expect them to have faster recovery times that average prepubertal children.) For our experiment, we will implement the following target rest times to prevent spillover between different timed tests while ensuring that we are able to collect data in a timely manner:

::: {tbl-colwidths="[15,15,70]"}
| **Event** | **Target Rest** | **Reason** |
| :--- | :--- | :--- |
| 100 IM SCY | 10 minutes | The 100 IM is more challenging than a 100 FR. However, @NeivaPassiveRest conducted a study with 200 FR, so a 10 minute rest is reasonable . Also, the swimmer will only swim 3/4 of the 100 IM because breaststroke is the 3rd lap. |
| 50 BR SCY | 7 minutes | This swim is 1/2 the length an IM and a BR requires the least energy output [@KachunovEnergetics]. |
| 25 BR SCY | 4 minutes | This time was informed when collecting the exploratory data set. |
: Target Rest Times between Timed Tests {#tbl-rest_times}
:::

## Mental Cues, Not Stroke Counts {#section-mental_cues_not_stroke_counts}
Because these swimmers are young, it is difficult to set a target $S_C$. Therefor, we instruct the swimmer to use a specific mental cue that roughly maps to $S_{C_{Target}}$. We collect the mental cue for each lap as outlined in @tbl-definition_input_parameters.

## Warm-Ups
Ahead of each session, the swimmer should swim the following 700-yard warm-up routine:

1. 2x 100 SCY. BR, FR. Pace: Slow, Medium. Rest 30 seconds after FR.
1. 2x 50 SCY. FR kick on stomach, BR kick on back. Pace: Medium, Fast. Rest 30 seconds after every set.
1. 4x 50 SCY. Drill on odd laps and normal swim on the even laps. Pace: Medium. Rest 30 seconds after every set.
1. 4x 25 SCY. Broken 100 IM SCY. Pace: Sprint. Rest 30 seconds after every of the first three sets, one minute rest after final set.
1. 1x 100 SCY. BR. Pace: Easy. Rest 10 minutes before starting timed tests.


## Applications of Belmont Principles
Given the swimmer is a minor engaged in a strenuous physical activity, there are safety considerations. Therefore additional rest times beyond those defined in @tbl-rest_times will be granted upon the swimmer's request and this information will be reflected in the data. Without impacting the swimmer's wellbeing, we do operationalize if a swimmer is feeling unwell with the variable $U$.

Also, because swimming is a year-round sport with no "off season", there are likely competitions happening during the study. During the study we discovered that a large reason why the $T_{Lap}$ is heteroskedastic is because of the kick, so we asked the swimmer to focus on narrower kicks because it benefits them during the competition to ensure that the subject benefits from the study as much as possible. Since we make this adjustment after the exploratory data set and before the collection of the primary data, we do not expect there to be an impact on the study.

# Model Building

## Causal Structural Equation Model

We start with the following base SEM. In @fig-causal_sem, arrows without an origin represents the residual variances of the endogenous variables. 

```{r causal_sem, echo=FALSE, message=FALSE}
#| label: fig-causal_sem
#| fig-cap: "Causal SEM"
#| fig-height: 6
#| fig-pos: H

source("source/causal_sem.R")

causal_sem_plot_data <- define_causal_sem_plot_data()

semPaths(causal_sem_plot_data$fitted_sem_model,
  # what = "paths",
  what = "mod",
  nodeLabels = causal_sem_plot_data$plot_labels,
  layout = "spring",
  style = "lisrel",      # Establishes a clean, academic look
  sizeMan = 12,          # Adjust box size
  edge.label.cex = 0.8,
  width = 16,            # Overall plot width
  mar = c(3,3,3,3))

# edges <- data.frame(
#   from = c(
#     "stroke_count", "glide_distance", "glide_distance", "technique", 
#     "technique", "glide_time", "fatigue", "flow_state", 
#     "stroke_count", "stroke_count"
#   ),
#   to = c(
#     "lap_time", "lap_time", "stroke_count", "stroke_count", 
#     "glide_distance", "glide_distance", "technique", "technique", 
#     "fatigue", "flow_state"
#   ),
#   # Use 'type = "paths"' for single-headed arrows (causal effects)
#   type = "paths"
# )
# 
# nodes <- data.frame(name = unique(c(edges$from, edges$to)))
# 
# graph_sem(
#   edges = edges,
#   nodes = nodes,
#   layout = get_layout(
#     "fatigue", "technique", "flow_state", 
#     "stroke_count", "glide_distance", "lap_time",
#     rows = 2
#   )
# )
```

Our base assumption is that $S_C$ and ${GlideDistance}$ are the two main predictors of $T_{Lap}$.

* As outlined in @sec-glide_distance_is_a_confounder, we are leaving ${GlideDistance}$ and ${GlideTime}$ out of our model.
* As outlined in @sec-heteroskedasticity_and_technique, we don't directly measure the technique or training because they're too complicated. A swimmer with good technique will have data that is homoskedastic.
* $S_C$ and how the swimmer feels impacts both fatigue and flow state. We operationalize these concepts with event_ordinal and unwell_feedback. We also note why we don't use varying coefficients in @sec-use_varying_coefficients.
* While the swim gear varies between competition and practice, the swimmer should use the same swim gear for the duration of the experiment.


## Causal Theory and Null Hypothesis

We opt for the explanatory mode for model building because we are primarily interested in deriving $S_C$.

@Craig1979, @Vorontsov1991, @Vorontsov2002, @JurimaeBestPredictors and many other studies have shown a causal relationship between a stroke statistic and its effect on $T_{Lap}$. Since $S_C$ has a mathematical relationship to those stroke statistics, then $S_C$ has a causal relationship with $T_{Lap}$. We want to see if there is a tighter causal relationship centered around an $S_{C_{Optimal}}$ and define our Null Hypothesis as:

> **$H_0$**: Given event_type and  $U$; $\left| T_{Lap_{Optimal}} - T_{Lap_{-2}} \right| \le 500$ and $\left| T_{Lap_{Optimal}} - T_{Lap_{+2}} \right| \le 500$ where $T_{Lap_{Optimal}} \sim S_{C_{Optimal}}$, $T_{Lap_{-2}} \sim S_{C_{Optimal}} - 2$ strokes, and $T_{Lap_{+2}} \sim S_{C_{Optimal}} + 2$ strokes.

For example, if we determine that the optimal $S_{C}$ for a given swimmer is 17 with a corresponding time of 20 seconds, then **$H_0$** asserts that there is not a .5 second difference from 20 seconds if the swimmer swims 15 or 19 strokes.

We choose .5 second for our 25 SCY lap because the difference between a top and second -tier national swimmer[^6] for a 50 BR SCY is $\le$ 2 seconds[^7]. A .5 second for each lap would equal a 1 second improvement for 50 SCY and the swimmer can work on glide time and turns to improve the time by another second.

We choose 2 strokes because it's difficult to differentiate between a single stroke. For instance a swimmer might swim 20 strokes and touches the wall on the way down on the 21st stroke.

[^6]: A AAAA-ranked swimmer is in the top 2% of swimmers in their age group, their same-sex, in that stroke and distance. A AAA-ranked swimmer is in the top 6% of swimmers in their age group, their same-sex, in that stroke and distance. \
    **Source:** Central California Swimming. (2024). 2024-2028 Motivational Standards Age Group. <https://www.gomotionapp.com/team/caraa/page/system/res/102429>
    
[^7]: AAAA time for boys and girls under 11-years-old for 50 BR SCY is 36.39 and 36.89 seconds, respectively. AAA time for boys and girls under 11-years-old for 50 BR SCY is 38.29 and 38.89 seconds, respectively. \
    **Source:** Pacific Swimming. (2024). 2024-2028 Motivational Standards Age Group. <https://www.pacswim.org/userfiles/cms/documents/801/2024-2028-motivational-standards-age-group.pdf>


## Interaction Terms and Operationalizing Fatigue
Our linear model make use of dummy / indicator variables to account for the optimal $S_C$ being different for the 50 BR SCY and 100 IM SCY because of the following considerations:

* Fatigue is especially pronounced in an IM race where breaststroke is the third leg of the race where the swimmer has expended a significant amount of energy. The swimmer must also reserve the energy for the last stroke of the race, freestyle, where the swimmer is expected to sprint because freestyle is the fastest of the four strokes.
* Turn and pullout distances are important because they will determine how much of the lap the swimmer has to swim. The ensuing turn and pullout distances will always be slower than the original start distance because the swimmer is jumping into the water as opposed to swimming in the water.

It's clear that $S_C$ for any subsequent lap is not independent of $S_C$ for the previous lap because a higher $S_C$ in the previous lap would require more energy, resulting in a more fatigued swimmer in subsequent laps.

## Regression Model

Our regression model is defined as

$$
\begin{split}
T_{Lap} = & \beta_0 + \beta_1 S_C + \beta_2 {S_C}^2 \\
& + \gamma_{50L2} I_{50L2} + \delta_{50L2}S_CI_{50L2} + \zeta_{50L2}{S_C}^2I_{50L2} \\
& + \gamma_{100IM} I_{100IM}  + \delta_{100IM}S_CI_{100IM}  + \zeta_{100IM}{S_C}^2I_{100IM} \\
& + \eta U + \theta_0 O + \theta_1 O^2 + \epsilon
\end{split}
$$ {#eq-regression_model}

::: {tbl-colwidths="[20,80]"}
| Component(s) | Definition |
| :--- | :--- |
| $T_{Lap}$ | The timing of how long it took for the swimmer to complete the breaststroke swim. For the data entry of types 25 and 50L1, this is the time it takes the swimmer to swim the first lap. For 50L2, this is the time it takes the swimmer to swim the second lap. For 100IM, this is the time it takes for the swimmer to swim the breaststroke leg of the IM.
| $\beta_0$ | This is the time needed to travel the entire distance of the first lap, assuming no stroke is taken. This is theoretically achievable for any stroke in a 25 SCY, 25 SCM, and 50 LCM scenario by a swimmer diving in and gliding to the other side without taking a single stroke. The values are in milliseconds. |
| $\beta_1$, $\beta_2$ | The increase or decrease in time for each stroke the swimmer takes. |
| $S_C$ | The stroke count that the swimmer takes for the given leg. |
| $\gamma_{50L2}$, $\gamma_{100IM}$ | $\gamma$'s operationalizes the combined lap penalty (e.g. for the previous lap in 50L2 and the previous two laps in 100IM) where the swimmer has to turn and pullout (which will always be slower than a good dive and start pullout), thereby increasing the base time $\beta_0$. |
| $I_{50L2Y}$ | An indicator variable; 1 if this is the 2nd leg of a 50 Breaststroke SCY event and 0 otherwise. |
| $I_{100IM}$ | An indicator variable; 1 if this is the breaststroke leg of a 100 Individual Medley SCY event and 0 otherwise. |
| $\delta_{50L2}$, $\delta_{100IM}$, $\zeta_{50L2}$, $\zeta_{100IM}$ | $\delta$'s operationalizes the fatigue from previous laps, thereby changing the slope of the model based on the change in the cost or benefit of each additional stroke. |
| $S_CI_{50L2}$ | An interaction variable that applies only if this is the 2nd leg of a 50 BR SCY event. Used in conjunction with $\delta$ to determine the cost or benefit of an additional stroke. |
| $S_CI_{100IM}$ | An interaction variable that applies only if this is the breaststroke leg of a 100 IM SCY event. Used in conjunction with $\delta$ to determine the cost or benefit of an additional stroke. |
| $S_CI_{50L2}$, ${S_C}^2I_{50L2}$ | An interaction variable that applies only if this is the 2nd leg of a 50 BR SCY event. Used in conjunction with $\delta$ to determine the cost or benefit of an additional stroke. |
| $S_CI_{100IM}$, ${S_C}^2I_{100IM}$ | An interaction variable that applies only if this is the breaststroke leg of a 100 IM SCY event. Used in conjunction with $\delta$ to determine the cost or benefit of an additional stroke. |
| $\eta U$ | $U$ operationalizes if the swimmer is feeling unwell and $\eta$ is the corresponding regression coefficient. |
| $\theta_0 O$, $\theta_1 O^2$ | $O$ is the event_ordinal from the data file and $\theta$'s are the corresponding regression coefficient. Operationalizes the tradeoff between fatigue over numerous trials vs flow state. |
| $\epsilon$ | The residual of the actual observed time vs that predicted by the model. Because we are building a explanatory model and not a predictive model, we are not interested in this value. |
: Definition of Model Components {#tbl-definition_of_model_components}
:::

Once we've collected data outlined in @tbl-definition_input_parameters, we'll use the Ordinary Least Squares (OLS) method to calculate our regression coefficients.

# Data

## Data Format

We will collect data in csv files with the title format YYYY_MM_DD_-8.csv where -8 is the current offset from GMT as defined below. Collecting the date and offset gives us resolution if we ever wanted to study effects of specific time of the year / month / week / day and ignore stale data.

::: {tbl-colwidths="[20,80]"}
| **Parameter** | **Use** |
| :--- | :--- |
| event_ordinal | The first event of the file is 1 and subsequent events are incremented by 1. Captured as $O$ in the model. There are two interpretations of this value's contribution to the model: 1) operationalizing a swimmer's fatigue over time despite resting between trials defined in @tbl-rest_times and 2) operationalizing when the swimmer enters "flow state" [@JacksonFlow]. |
| start_time | The local HH:mm:ss in 24-hour format. For multi-lap swim, this value is null. Not used in the model. |
| elapsed_time | How long it took the swimmer to complete the lap with millisecond resolution. |
| stroke_count | The number of strokes the swimmer took to complete the lap. |
| mental_cue | A way to help our swimmer track when to start the next stroke and help them establish their tempo. For example, if we instruct the swimmer to mentally say "purple" before starting the next stroke, then we expect the swimmer to have a higher $S_C$ than mentally saying "one one thousand two". |
| data_entry_type | One of \{25, 50L1, 50L2, 100IM\}. |
| unwell_feedback | Operationalizes if the swimmer is not feeling well, usually because they are tired, hurt, or are not in the mood to swim. Captured as $U$ in the model. Defaults to 0. 1 means they are unwell and -1 means they are feeling great. |
| note | Optional value describing the data. Not used in the model. |
: Definition of Input Parameters {#tbl-definition_input_parameters}
:::

### Metadata

The following contextual variables are currently not used when building our data model either because they are qualitative in nature or we do not have enough conviction to include them in the model.

* In our data collection, we track $event_ordinal$ because they might impact have a significant impact on $T_{Lap}$. We do not believe this is the case because we have implemented a Rest Time strategy which should ensure sufficient non-interference.
* The $mental_cue$ is a way to help the swimmer maintain a consistent $S_R$.
* Our model does not differentiate the data from a 25 SCY with a that of the first leg of a 50 SCY. Our $data\_entry\_type$ will keep the values 25 and 50L1 for future consideration into the model. We will have the swimmer swim both a 25 SCY and 50 SCY and use the data from the 25 SCY to help validate our baseline.
* $note$ is qualitative information and is not used in the model.

## Exploratory Data Analysis

It's helpful to start with an exploratory data set to get a sense of the relationship between $S_C$ and $T_{Lap}$ and help us define the shape of our regression model. To start, we had one test subject swim

* 2 laps with the instruction with lowest $S_C$ possible.
* 3 laps of 25 BR SCY using various mental cues that will set the tempo.
* 2 laps with the instruction with the highest $S_C$ possible.


The swimmer had 3-4 minutes of rest time between the timed trials and we use this experience to help inform @tbl-rest_times. Due to the availability of time and the pool lane, we limited the collection to 25 BR SCY and data collection took place over a period of two days.

The swimmer's name is Jadzia Bao Tran Vo (<https://www.swimcloud.com/swimmer/2555077/>) and is the daughter of Duy Bao Vo.

```{r analyze_exploratory_data, echo=FALSE, message=FALSE, warning=FALSE}
source("source/analyze_exploratory_data.R")

kable(
  summary_exploratory_data_stats,
  caption = "Summary Statistics for Elapsed Time (in milliseconds) by Stroke Count {#tbl-summary_statistics_exploratory_data}",
  col.names = c("**$\\mathbf{S_C}$**", "**$\\mathbf{\\bar{x}}$**", "**$\\mathbf{s}$**"),
  
  # Tell table to pass the raw LaTeX code (like $\mathbf...$) instead of converting it to plain text.  
  escape = FALSE
)
```


```{r plot_exploratory_data}
#| echo: false
#| fig-cap: "Distribution of Elapsed Time (in milliseconds) for each Stroke Count in 25 BR"
#| fig-cap-location: top
#| fig-height: 7
#| fig-pos: H
#| label: fig-exploratory_data_stroke_count_elapsed_time_plot 
#| message: false
#| warning: false

exploratory_data_y_min <- 25000
exploratory_data_y_max <- 28000
exploratory_data_y_seq <- seq(from = exploratory_data_y_min, to = exploratory_data_y_max, by = 500)



ggplot(exploratory_data,
       aes(x = factor(prepped_exploratory_data$stroke_count),
           # y = prepped_exploratory_data$time_milliseconds)) +
           y = as.numeric(prepped_exploratory_data$time_milliseconds),
           color = factor(prepped_exploratory_data$unwell_feedback), 
           shape = factor(prepped_exploratory_data$data_entry_type))) +
geom_point(width = 0.2, alpha = 0.7, size = 3, stroke = 2) +
geom_text(aes(label = prepped_exploratory_data$event_ordinal), 
          nudge_x = 0.25,     # Move slightly to the right
          nudge_y = -40,      # Move slightly down (Adjust this value based on your Y scale!)
          size = 3,           # Make font smaller than the dots
          color = "black",    # Keep text black so it's readable
          fontface = "bold",
          show.legend = FALSE # Don't add 'a' to the legend
  ) +
scale_color_manual(values = data_plot_custom_colors) +
scale_shape_manual(values = data_plot_custom_shapes) +
scale_y_continuous(
  breaks = exploratory_data_y_seq,      # Forces labels at 0, 10000, ... 80000
  limits = c(exploratory_data_y_min, exploratory_data_y_max) # Forces the graph to start/end exactly there
) +
labs(
  # title = "Elapsed Lap Time by Stroke Count",
  x = expression(bold(S[C])),
  y = expression(bold(T[lap])),
  color = "unwell_feedback"
) +
theme(legend.position = "bottom") +
guides(shape = "none")

```

## Power Analysis

We use @fig-exploratory_data_stroke_count_elapsed_time_plot to help inform us of how to model @eq-regression_model. We use the summary statistics, excluding those without standard deviations, in @tbl-summary_statistics_exploratory_data to generate test data from $N(\bar{x}, s)$. This allows us to execute our power analysis.

```{r exploratory_data_power_analysis, echo=FALSE, message=FALSE, warning=FALSE}
source("source/exploratory_data_power_analysis.R")
```

We ran `r power_analysis_simulation_count` simulations and determined that our swimmer should swim at least `r power_analysis_data_size` laps to achieve a power of at least `r exploratory_data_power` for $\alpha$ = `r alpha`.

## Data Collection

```{r compile_main_data, echo=FALSE, message=FALSE, warning=FALSE}
source("source/compile_main_data.R")

data_files_names <- c("20251118_-8.csv", "20251121_-8.csv", "20251122_-8.csv", "20251129_-8.csv", "20251204_-8.csv", "20251208_-8.csv")
main_data <- compile_data_files(data_files_names)
main_data_for_plotting <- prep_data_for_plotting(main_data)
main_data_for_modeling <- prep_data_for_modeling(main_data)

number_of_br_laps <- nrow(main_data)
number_of_br_sessions <- length(data_files_names)

summary_main_data_stats <- summarize(
  group_by(main_data_for_plotting, stroke_count),
  mean_time = as.numeric(mean(time_milliseconds)),
  standard_deviation=sd(time_milliseconds))
```

Jadzia Vo swam `r number_of_br_laps` 25 SCY BR laps over `r number_of_br_sessions` sessions. Each session happened on a different day.

```{r plot_main_data}
#| echo: false
#| fig-cap: "Distribution of Elapsed Time (in milliseconds) for each Stroke Count"
#| fig-height: 8
#| fig-pos: H
#| fig-cap-location: top
#| label: fig-main_data_stroke_count_elapsed_time_plot
#| message: false
#| warning: false

main_data_y_min <- 26000
main_data_y_max <- 38000
main_data_y_seq <- seq(from = main_data_y_min, to = main_data_y_max, by = 500)


ggplot(main_data,
       aes(x = factor(main_data_for_plotting$stroke_count),
           y = as.numeric(main_data_for_plotting$time_milliseconds),
           color = factor(main_data_for_plotting$unwell_feedback), 
           shape = main_data_for_plotting$data_entry_type)) +
geom_point(width = 0.2, alpha = 0.7, size = 3, stroke = 2) +
geom_text(aes(label = main_data_for_plotting$event_ordinal), 
          nudge_x = 0.15,     # Move slightly to the right
          nudge_y = -180,     # Move slightly down (Adjust this value based on your Y scale!)
          size = 3,           # Make font smaller than the dots
          color = "black",    # Keep text black so it's readable
          fontface = "bold",
          show.legend = FALSE # Don't add 'a' to the legend
  ) +  
scale_color_manual(values = data_plot_custom_colors) +
scale_shape_manual(values = data_plot_custom_shapes) +
scale_y_continuous(
  breaks = main_data_y_seq,      # Forces labels at 0, 10000, ... 80000
  limits = c(main_data_y_min, main_data_y_max) # Forces the graph to start/end exactly there
) +
labs(
  # title = "Elapsed Lap Time by Stroke Count",
  x = expression(bold(S[C])),
  y = expression(bold(T[lap])),
  color = "unwell_feedback", # Legend Title
  shape = "data_entry_type", # Legend Title
  #color = "data_entry_type"  # Legend Title (must match color title to combine legends)
) +
theme(legend.position = "bottom",
      legend.box = "vertical")

### Explanation of the Shapes
# In R's `ggplot2`, shapes are mapped to integer codes. I used the following for your request:
# * **Shape 16:** Filled Circle (Dot) $\rightarrow$ Used for "25" and "50L1".
# * **Shape 4:** Cross (X) $\rightarrow$ Used for "50L2".
# * **Shape 17:** Filled Triangle $\rightarrow$ Used for "100IM".

```

# Analysis

## Hypothesis Testing

## Deriving Stroke Count

Once we've collected the data and used OLS to calculate the regression coefficients, we end up with the equation

$$
\begin{split}
T_{Lap} = & \beta_0 + \beta_1 S_C + \beta_2 {S_C}^2 + \theta_0 O + \theta_1 O^2 \\
& + \gamma_{50L2} I_{50L2} + \delta_{50L2}S_CI_{50L2} + \zeta_{50L2}{S_C}^2I_{50L2} \\
& + \gamma_{100IM} I_{100IM}  + \delta_{100IM}S_CI_{100IM}  + \zeta_{100IM}{S_C}^2I_{100IM} \\
& + \eta_{unwell} (U_{unwell} ) + \eta_{unwell} (U_{unwell} S_C ) + \eta_{unwell} (U_{unwell} {S_C}^2) \\\
& + \eta_{well} (U_{well} ) + \eta_{well} (U_{well} S_C) + \eta_{well} (U_{well} {S_C}^2)\\
& + \epsilon
\end{split}
$$ {#eq-fitted_regression_model}

Next, we group the times first by the Data Entry Type as defined in @tbl-definition_input_parameters

* 25 and 50L1 are grouped together
* 50L2
* 100IM

After the grouping by the Data Entry Type, we group by the stroke count so we can calculate the following statistics:

* number of entries ($n$)
* mean ($\bar{x}$)
* median ($\tilde{x}$)
* fastest ($x_{Fastest}$)
* slowest ($x_{Slowest}$)
* sample standard deviation ($s$)
* sample standard error of the mean ($s_{\bar{x}}$)

Choosing the optimal stroke for each swimmer will likely require understanding their swimming style, personality, and maturity. For example, all of the following scenarios are possible for a given swimmer:

* $S_{C_1}$ is associated with the two fastest times.
* $S_{C_2}$ is associated with the fastest $\bar{x}$, but the third biggest $s$.
* $S_{C_3}$ is associated with the second fastest $\bar{x}$, but the smallest $s$.

Once we've selected the $T_{Target}$, we calculate the desired $S_C$ for each of the three scenarios:

$$
S_C = \frac{-\hat{\beta}_1 \pm \sqrt{{\hat{\beta}_1}^2 - 4 \hat{\beta}_2(\hat{\beta}_0 - T_{Target})}} {2\hat{\beta}_2}
$$ {#eq-stroke_count_for_target_time_25} Stroke Count for 25 BR SCY or First Leg of 50 BR SCY Associated with Target Time

$$
S_C = \frac{-(\hat{\beta}_1 + \delta_{50L2}) \pm \sqrt{(\hat{\beta}_1 + \delta_{50L2})^2 - 4 \hat{\beta}_2(\hat{\beta}_0 + \gamma_{50L2} - T_{Target})}} {2\hat{\beta}_2}
$$ {#eq-stroke_count_for_target_time_50L2} Stroke Count for Second Leg of 50 BR SCY Associated with Target Time

$$
S_C = \frac{-(\hat{\beta}_1 + \delta_{100IM}) \pm \sqrt{(\hat{\beta}_1 + \delta_{100IM})^2 - 4 \hat{\beta}_2(\hat{\beta}_0 + \gamma_{100IM} - T_{Target})}} {2\hat{\beta}_2}
$$ {#eq-stroke_count_for_target_time_100IM} Stroke Count for Breaststroke Leg of 100 IM SCY Associated with Target Time

The quadratic formula for $S_C$ gives us additional options when $T_{Target}$ is not the vertex because there are two $S_C$'s in the solution (from too few strokes and too many strokes):

* Given 2 $S_C$'s, with all else being equal, we would likely choose the one with lower variance for a 25 BR SCY.
* Given 2 $S_C$'s, we might consider choosing the lower $S_C$ if the swimmer is a weak breaststroker in an IM even if the variance is a bit higher or $\bar{x}$ is a bit slower.

### Case Study: Jadzia Bao Tran Vo

Based on the following data set, we have computed the following for Jadzia Vo:

``` {r descriptive_analysis_by_data_entry_type, echo=FALSE, message=FALSE, warning=FALSE}


summary_data_entry_type_25_50L1 <- derive_detailed_analysis_by_stroke_count(main_data_for_modeling, "25 or 50L1")
summary_data_entry_type_50L2 <- derive_detailed_analysis_by_stroke_count(main_data_for_modeling, "50L2")
summary_data_entry_type_100IM <- derive_detailed_analysis_by_stroke_count(main_data_for_modeling, "100IM")

kable(summary_data_entry_type_25_50L1 , digits = 1, 
      caption = "Analysis of Jadzia Vo's Swimming Time (ms) by Stroke Count for 25 and 50L1 Entries")

kable(summary_data_entry_type_50L2 , digits = 1, 
      caption = "Analysis of Jadzia Vo's Swimming Time (ms) by Stroke Count for 50L2 Entries")

kable(summary_data_entry_type_100IM , digits = 1, 
      caption = "Analysis of Jadzia Vo's Swimming Time (ms) by Stroke Count for 100MI Entries")


```


#### Limited Applicability to Individual Medley (IM) Events

IM's are inherently different from other competitive events because the swimmer must swim all four strokes. Swimmers' performance can vary significantly among different strokes. For example, Katie Ledecky, who holds the world record for most gold medals won by a female swimmer, has only ever swam freestyle events at the Olympics [@OlympicsLedecky]. Michael Phelps, who holds the world record for most gold medals won by a male swimmer [@OlympicsPhelps], has never swam an individual backstroke or breaststroke event at the Olympics [@OlympediaPhelpsIndividualEvents]. When optimizing for IM, it's important to consider the strengths of the swimmer, which is rarely breaststroke. For many swimmers, including Jadzia Vo, optimizing the breaststroke time in an IM will likely lead to a sub optimal overall IM time.

If we want to find an optimal $S_C$ for each stroke to optimize for the time of the entire IM, then we'll need to build completely different model that has all the variables interacting together. However, if we have apriori knowledge that can help inform our race strategy, we can still use this model to help determine a good IM strategy.

USA Swimming has a Power Point Calculator at <https://data.usaswimming.org/datahub/powerpointcalculator> for calculating the relative strengths of a swimmer's stroke across different events. There are some notable idiosyncrasies about the calculator:

* Age group ranges are defined by USA Swimming. For example, for 50 FR SCY, a 7-year-old and an 8-year-old will be compared together whereas a 9-year-old and a 10-year-old will be compared together. This means that a swimmer who just turned 7 yesterday will have their time compared with a swimmer who will turn 9 tomorrow, giving the latter swimmer an almost 2-year advantage in physical development and swim experience.
* There is no fraction, so we used \pm 6 months to determine the age.
* For events that there is no time standard (e.g. swimmers under 9 years old do not have time standards for a 500 FR SCY), they will be compared against the first group where the time standard applies. For example, a swimmer who turned 7 yesterday and swims a 500 FR SCY will be compared to a swimmer who will turn 11 tomorrow, giving the latter swimmer an almost 4-year advantage in physical development and swim experience.

We can use USA Swimming's Power Points to determine what is likely the swimmer's best stroke and prioritize those strokes when optimizing for an IM swim.

| **Event** | **Age** | **Best Time** | **Power Points** |
| :--- | :--- | :--- | :--- |
| 50 BK SCY | 8 | 44.96 | 242 |
| 50 BR SCY | 8 | 52.63	| 207 |
| 50 FL SCY | 8 | 43.56 | 242 |
| 50 FR SCY | 8 | 39.22 | 241 |
: USA Swimming Power Points for Jadzia Vo {#tbl-power_points_jadzia_vo}

<!-- | 100 FR SCY | 8 | 1:30.30 | 131 | -->
<!-- | 200 FR SCY | 8 | 3:09:35 | 161 | -->
<!-- | 500 FR SCY | 8 | 8:21.35	| 157 | -->
<!-- | 100 BK SCY | 8 | 1:40.19 | 209 | -->
<!-- | 100 BR SCY | 7 | 1:57.03 | 188 | -->
<!-- | 100 FL SCY | 8 | 1:52.12 | 82 | -->
<!-- | 100 IM SCY | 8 | 1:36.42 | 269 | -->
<!-- | 200 IM SCY | 7 | 3:50.64 | 84 | -->
<!-- | 50 FR LCM | 7 | 48.85 | 97 | -->
<!-- | 100 FR LCM | 8 | 1:41.90 | 156 | -->
<!-- | 200 FR LCM | 8 | 3:37.42 | 142 | -->
<!-- | 400 FR LCM | 8 | 7:43.73	| 130 | -->
<!-- | 50 BK LCM | 8 | 54.50 | 164 | -->
<!-- | 100 BK LCM | 8 | 1:52.15 | 259 | -->
<!-- | 200 BK LCM | 8 | 4:00.86 | 1 | -->
<!-- | 50 BR LCM | 8 | 1:01.33	| 198 | -->
<!-- | 100 BR LCM | 8 | 2:19.21 | 138 | -->
<!-- | 200 BR LCM | 8 | 4:47.47 | 1 | -->
<!-- | 50 FL LCM | 8 | 50.22 | 211 | -->
<!-- | 100 FL LCM | 8 | 2:02.80 | 168 | -->
<!-- | 200 IM LCM | 8 | 4:06.95 | 189 | -->

To optimize for the 100 IM SCY, we look at SCY data and it's obvious that Jadzia's breaststroke is the her weakest (BR=207) whereas her other three strokes are effectively equally strong (FR=241, BK=242, FL=242). We would want to optimize her times for the other three strokes. The challenge will be to find $T_{Target}$ for breaststroke (third leg) that is as fast as possible without materially impacting $T_{Target}$ for freestyle (fourth and final leg). Once we've defined $T_{Target}$ for breaststroke, we can use @eq-stroke_count_for_target_time_100IM to find $S_C$ for breaststroke that is a good minimizer for the 100 IM.

# Conclusion



# Future Work

## Glide Distance is a Confounder { #sec-glide_distance_is_a_confounder }
Glide distance is an important consideration when trying to minimize $T_{Lap}$. It is also a confounder because it directly affects both $T_{Lap}$ and $S_C$. A very good swimmer can swim nearly 1/2 of an SCY lap with a fast glide, reducing both $T_{Lap}$ and $S_C$.

A glide has several phases:

1. The initial dive or turn and kick-off the wall.
1. The glide to the dolphin kick.
1. The dolphin kick.
1. The glide after the dolphin kick to the pull down.
1. The pull down.
1. The glide after the pull down to the first breaststroke.

To properly model an optimal glide distance would likely require several additional variables and well outside of the scope of this study. For this study, we assume that swimmer who has obtained sufficient mastery of breaststroke at competition to not get disqualified will have a sufficiently consistent glide time using the one of the models that they have been taught (e.g. 3-2-1-pull-out). In our model, we imperfectly account for this complex variable as $\beta{0}$.

<!-- ## Additional Variables -->
<!-- In addition to considering other strokes, there are additional variables that might improve our model, but are not too onerous to collect. -->

<!-- ::: {tbl-colwidths="[35,65]"} -->
<!-- | **Variable** | **Reason** | -->
<!-- | :--- | :--- | -->
<!-- | Age | Competitive swimming requires significant concentration to improve technique. Age is a proxy for maturity. We can use this variable to weight older data. We can also This variable could also be useful for selecting the optimal $S_C$ where associated with a high $s$ but fast $\bar{x}$ or $x_{Fastest}$. | -->
<!-- | Number of competitions | Good swimmers know their bodies and swim styles. The more experience they have at competition, the more ability they have to feel how their body interacts with water. This variable could be useful for selecting the optimal $S_C$ where associated with a high $s$ but fast $\bar{x}$ or $x_{Fastest}$. -->
<!-- ::: -->

## Use Varying Coefficients for 50, 100, and 200 BR's { #sec-use_varying_coefficients }
Our current model is a per-lap model and assumes that the penalties $\gamma$ and $\delta$ are constants calculated as the average across different $S_C$'s for the first lap. The best we can do with the model is to optimize for each lap independently. Our causal SEM, as defined in @fig-causal_sem, defines the $S_C$ as both a cause and result of fatigue and flow state, so we should use varying coefficients. However, for a young competitive swimmer, our current model is sufficient, especially given that there are no qualifying times for 100 or 200 BR for swimmers under 9-years-old. Moreover, and especially because [we use mental cues and not $S_{C_{Target}}$](#section-mental_cues_not_stroke_counts), it is likely too difficult for younger swimmers to vary their mental cues for different laps. For a more complete model, we would need to have $\gamma$ and $\delta$ be functions of $S_C$ of the first lap and, analogously, for additional laps as we increase the length to 100 and 200 BR's.

## SCM and LCM & BK, FL, and FR
We limited our study to SCY because that's the prevailing courses available during the time of the study in the US. We could expand the study to encompass LCM and SCM events and include longer distance events like 1500 FR LCM.

We also limited our study to breaststroke. There are three other competitive strokes we can analyze.

<!-- ## Non-Linear Interaction Term for IM's -->
<!-- Our model assumes that the interaction term for a 100 IM is $\delta_{100IM}S_CI_{100IM}$. Logically, we think that there should be another term $\delta_{100IM_2}{S_C}^2I_{100IM}$ because the cost of additional strokes, and therefore additional energy, is incredibly punishing for any young competitive swimmer who's not a strong breaststroker (as evident by @tbl-power_points_jadzia_vo is a relatively weak breaststroker). However, we lack the data to have sufficient conviction to add this term. Therefore, in the interest of parsimony, we opted for a linear interaction term. -->

## $S_C$ Heteroskedasticity and Technique { #sec-heteroskedasticity_and_technique }
Our quadratic equation gives us two solution for a given $T_{Target}$ if $T_{Target} \neq T_{Fastest}$. A reason to consider $T_{Target} \neq T_{Fastest}$ is if $\sigma^2[T_{Target}] \ll \sigma^2[T_{Fastest}]$ and $T_{Target} \approx T_{Fastest}$.
If $S_{C_{Less}}$ and $S_{C_{More}}$ results in the same $T_{Target}$, $S_{C_{Less}}$ would require less energy, and therefore be preferable. However $S_{C_{Less}}$ would also require much more precision in the kick and streamline, and thus likely to have a higher variance. There seems to be heteroscedasticity with variance of stroke counts, especially for younger swimmers that have not mastered precision. It would be useful to test the correlation between $S_C$ and $\sigma^2[T_{Lap}]$ with Spearman's Correlation Test. If $\rho \approx 1$ and $p < \alpha$, then it would be very beneficial for the swimmer to train for precision.
Qualitatively, Jadzia Vo's swim coaches have confirmed that Jadzia's kicks are not consistently narrow, which explains the variance seen in @fig-exploratory_data_stroke_count_elapsed_time_plot.

{{< pagebreak >}}

# References

::: {#refs}
:::

# Appendix A - Evolution of Regression Model
This section details how our regression model evolved over time.

## Model V1: Basic Model with Three Event Types

$$
\begin{split}
\hat{T}_{Lap} = & \hat{\beta}_0 + \hat{\beta}_1 S_C + \hat{\beta}_2 {S_C}^2 \\
 & + \hat{\gamma}_{50L2} I_{50L2} + \hat{\delta}_{50L2}S_CI_{50L2} + \hat{\zeta}_{50L2}{S_C}^2I_{50L2} \\
 & + \hat{\gamma}_{100IM} I_{100IM}  + \hat{\delta}_{100IM}S_CI_{100IM} + \hat{\zeta}_{100IM}{S_C}^2I_{100IM}
\end{split}
$$ {#eq-regression_model_v1}

Our initial model simply broke up the various events into three groups and included the appropriate interaction terms.

```{r summary_regression_model_v1, echo=FALSE}
 model_v1 <- lm(time_milliseconds ~ 
                stroke_count + 
                I(stroke_count^2) + 
                data_entry_type + 
                stroke_count * data_entry_type + 
                I(stroke_count^2) * data_entry_type,
              data = main_data_for_modeling)

model_v1_summary_data <- calculate_model_coefficients_summary(model_v1)

knitr::kable(model_v1_summary_data$table_summary_data, digits = 3, caption = "Model v1 Summary")
```

We achieved a decent $R^2$ (`r model_v1_summary_data$r_squared`) and adjusted $R^2$ (`r model_v1_summary_data$adjusted_r_squared`), but our regression coefficients were not statistically significant.

## Model V2: Include unwell_feedback and event_ordinal

$$
\begin{split}
\hat{T}_{Lap} = & \hat{\beta}_0 + \hat{\beta}_1 S_C + \hat{\beta}_2 {S_C}^2 \\
 & + \hat{\gamma}_{50L2} I_{50L2} + \hat{\delta}_{50L2}S_CI_{50L2} + \hat{\zeta}_{50L2}{S_C}^2I_{50L2} \\
 & + \hat{\gamma}_{100IM} I_{100IM}  + \hat{\delta}_{100IM}S_CI_{100IM} + \hat{\zeta}_{100IM}{S_C}^2I_{100IM} \\
 & + \hat{\gamma}_{unwell} I_{unwell}  + \hat{\delta}_{unwell}S_CI_{unwell} + \hat{\zeta}_{unwell}{S_C}^2I_{unwell} \\
 & + \hat{\gamma}_{well} I_{well}  + \hat{\delta}_{well}S_CI_{well} + \hat{\zeta}_{well}{S_C}^2I_{well} \\
 & + \hat{\eta}_0 O + \hat{\eta}_1 O^2 
\end{split}
$$ {#eq-regression_model_v2}

The next iteration of our test incorporated the unwell_feedback and event_ordinal.

```{r summary_regression_model_v2, echo=FALSE, results='asis'}
 model_v2 <- lm(time_milliseconds ~ 
                stroke_count + 
                I(stroke_count^2) + 
                data_entry_type + 
                event_ordinal + 
                I(event_ordinal^2) +
                unwell_feedback +
                stroke_count * data_entry_type + 
                I(stroke_count^2) * data_entry_type +
                stroke_count * unwell_feedback  + 
                I(stroke_count^2) * unwell_feedback, 
              data = main_data_for_modeling  )

model_v2_summary_data <- calculate_model_coefficients_summary(model_v2)

knitr::kable(model_v2_summary_data$table_summary_data, digits = 3, caption = "Model v2 Summary")


 model_v0 <- lm(time_milliseconds ~ 
                data_entry_type , 
              data = main_data_for_modeling  )
 
 
 model_v3 <- lm(time_milliseconds ~ 
                stroke_count + 
                I(stroke_count^2) + 
                data_entry_type , 
              data = main_data_for_modeling  )
 
 stargazer(model_v0, model_v3, type = "text")
 
anova(model_v0, model_v1)

compared_result1 <- anova(model_v0, model_v1)


 model_v4 <- lm(time_milliseconds ~ 
                stroke_count + 
                data_entry_type+
                stroke_count * data_entry_type, 
              data = main_data_for_modeling  )

 stargazer(model_v1, model_v2, model_v3,  model_v4,
           type = "text")
 
 
 main_data_for_modeling_subset<- main_data_for_modeling %>%
   filter(data_entry_type == "25 or 50L1")
 
 
  model_v5 <- lm(time_milliseconds ~ 
                stroke_count +
                I(stroke_count^2)  , 
              data = main_data_for_modeling  )
  
  
    model_v6 <- lm(time_milliseconds ~ 
                poly(stroke_count, degree=2) , 
              data = main_data_for_modeling  )
  
  
  summary(model_v5)

 
 
 temp1<- predict(model_v5, newdata = data.frame(stroke_count = 10 : 25))
  
  plot2 <-plot(x =10:25, y = temp1)
  
# stargazer(model_v2, 
#           type = "latex",
#           se = list(sqrt(diag(vcovHC(model, type = "HC1")))),
#           title = "Predicting General Votes based on Candidate Party and Funding",
#           dep.var.labels = "General Votes",
#           covariate.labels = c("Total Disbursement",
#                                "Candidate Party: Other Party", 
#                                "Candidate Party: Republican",
#                                "Candidate Party: Democrat (baseline)"),
#           notes.label = "Significance:"
# )
```

Compared to @eq-regression_model_v1, we achieved an incrementally larger $R^2$ (`r model_v2_summary_data$r_squared`), but lower adjusted $R^2$ (`r model_v2_summary_data$adjusted_r_squared`) and with estimators with higher $p$ values, indicating that this model suffers from overfitting.`